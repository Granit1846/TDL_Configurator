<UserControl x:Class="TDL.Configurator.App.Pages.ChaosPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header row -->
        <DockPanel Grid.Row="0" LastChildFill="False">
            <TextBlock Text="Chaos"
                       FontSize="20"
                       FontWeight="SemiBold"
                       DockPanel.Dock="Left" />

            <StackPanel Orientation="Horizontal"
                        DockPanel.Dock="Right"
                        HorizontalAlignment="Right">
                <Button Content="Загрузить"
                        Width="110"
                        Margin="0,0,8,0"
                        Click="Load_Click"/>
                <Button Content="Сохранить"
                        Width="110"
                        Click="Save_Click"/>
            </StackPanel>
        </DockPanel>

        <ScrollViewer Grid.Row="1"
                      Margin="0,12,0,0"
                      VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- Spoiler / Expander -->
                <Expander Header="INI: [Chaos]"
                          IsExpanded="True">
                    <DockPanel Margin="8">

                        <StackPanel Orientation="Horizontal"
                                    DockPanel.Dock="Top"
                                    Margin="0,0,0,8">
                            <Button Content="Добавить строку"
                                    Width="140"
                                    Margin="0,0,8,0"
                                    Click="AddRow_Click"/>
                            <Button Content="Удалить выбранное"
                                    Width="160"
                                    Click="RemoveSelected_Click"/>
                        </StackPanel>

                        <DataGrid x:Name="ChaosGrid"
                                  ItemsSource="{Binding Entries}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  HeadersVisibility="Column"
                                  MinHeight="220">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Key"
                                                    Width="2*"
                                                    Binding="{Binding Key, UpdateSourceTrigger=PropertyChanged}"/>
                                <DataGridTextColumn Header="Value"
                                                    Width="3*"
                                                    Binding="{Binding Value, UpdateSourceTrigger=PropertyChanged}"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                </Expander>

                <Expander Header="Подсказка"
                          IsExpanded="False"
                          Margin="0,8,0,0">
                    <TextBlock Margin="8"
                               TextWrapping="Wrap">
                        Эта вкладка редактирует секцию [Chaos] в файле Data\SKSE\Plugins\TDL_StreamPlugin.ini.
                        Если секции нет — она будет создана при сохранении.
                    </TextBlock>
                </Expander>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
