# TDL: правила стрим‑интеграции

## Ключевая идея
Чат **не управляет игрой напрямую**. Любой внешний запрос — это только *заявка* на событие. Окончательное решение о запуске принимает мод (через **StreamController**) с учётом приоритетов, кулдаунов и текущего состояния игры.

## Принципы
1. **Единая точка входа:** все события проходят через `TDL_StreamController`.
2. **Приоритет источника важнее скорости:** если одновременно приходят разные заявки, мод выбирает по правилам приоритета.
3. **Кулдауны обязательны:** это защита от спама и способ сохранить “шоу”, а не превратить игру в неконтролируемый хаос.
4. **Мощные эффекты должны быть редкими:** чем сильнее влияние на игру, тем выше требования (лимиты/кулдаун/стоимость).
5. **Внешний ввод только через SKSE:** Papyrus не предназначен для сетевого ввода и IPC через файлы.

## Приоритеты источников
Порядок обработки заявок (по умолчанию):

1) **Bits**  
2) **Channel Points**  
3) **Voting**

> Если вы меняете приоритеты — делайте это осознанно: “дешёвые” источники при высоком приоритете быстро превратят поток событий в спам.

## Рекомендации по балансу
- Держите “базовые” эффекты (лечения/мелкие вызовы/лёгкие приколы) **частыми**, но с короткими кулдаунами.
- “Тяжёлые” события (драконы, массовые телепорты, большие спавны, сильные дебаффы) — **редкими** и с заметными кулдаунами.
- Не давайте зрителю полный контроль: мод должен оставаться арбитром (это делает шоу управляемым).

## Цель
Сделать **шоу с правилами**, где зритель влияет на происходящее, но игра остаётся стабильной и предсказуемой по нагрузке.

## См. также
- «Протокол и команды» — как отправляются действия через внешний слой.
- «FORCE и безопасность» — почему некоторые режимы опасны и как их использовать.
- «Справочник Action» — что именно делают события и какие у них риски.
